# ESTIMATORS
There are three types of estimators used in this system: one to calibrate the magnetometer, one to calibrate the photodiodes, and a standard MEKF to estimate attitude once everything is calibrated (there is an additional "trivial" controller as well that performs no estimations and simply used for convenience in coding).

## Magnetometer Calibration
The purpose of the magnetometer calibration is to account for imperfections in the magnetometer that affect the measured magnetic field vector. These error sources include constant biases, scale factors, and axes that are not perfectly orthogonal.

For now, time-varying errors caused by current-induced magnetic fields are not included, as any equipment that requires a strong current will not be used during this calibration phase. 

(*Attitude-Independent Magnetometer Calibration
with Time-Varying Bias*, Springmann 2012)

## Photodiode Calibration 
The purpose of the photodiode calibration is to account for error during installation of the photodiodes; it is assumed that the surface normal of each photodiode is roughly correct, but not perfect. Additionally, the current generated by each photodiode varies and the scale factor needs to be estimated. 

The estimator extends a standard MEKF to estimate these values as well, and does so on-board in an iterative manner. Note that this method is independent of the number of photodiodes that need to be calibrated.

(*On-Orbit Calibration of Photodiodes for Attitude Determination*, Springmann)

## MEKF 
Once everything has been calibrated, the estimator used is a standard MEKF that tracks the attitude and gyro biases. 

([AA236b Class Notes, Dr. Manchester](https://github.com/aa236b-winter-2019/software-simulation/blob/master/References/ADCS%20Lecture%20Notes/Lecture%2012%20-%20MEKF.pdf))